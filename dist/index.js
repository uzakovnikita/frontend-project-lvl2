"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _lodash = require("lodash");

var _fs = require("fs");

const plus = key => `+ ${key}`;

const minus = key => `- ${key}`;

var _default = (firstConfig, secondConfig) => {
  const result = {};
  const firstData = (0, _fs.readFileSync)(firstConfig, {
    encoding: 'utf-8'
  }, function (err, data) {
    if (err) {
      return err;
    } else {
      return JSON.parse(data);
    }
  });
  const secondData = (0, _fs.readFileSync)(secondConfig, {
    encoding: 'utf-8'
  }, function (err, data) {
    if (err) {
      return err;
    } else {
      return JSON.parse(data);
    }
  });

  if ((0, _lodash.isEqual)(firstData, secondData)) {
    return firstData;
  }

  const keys = Object.keys(firstData);

  for (const key of keys) {
    if ((0, _lodash.has)(secondData, key)) {
      if (secondData[key] === firstData[key]) {
        result[key] = firstData[key];
      } else {
        result[plus(key)] = secondData[key];
        result[minus(key)] = firstData[key];
      }
    } else {
      result[minus(key)] = firstData[key];
    }
  }

  return result;
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJwbHVzIiwia2V5IiwibWludXMiLCJmaXJzdENvbmZpZyIsInNlY29uZENvbmZpZyIsInJlc3VsdCIsImZpcnN0RGF0YSIsImVuY29kaW5nIiwiZXJyIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInNlY29uZERhdGEiLCJrZXlzIiwiT2JqZWN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0EsTUFBTUEsSUFBSSxHQUFJQyxHQUFELElBQVUsS0FBSUEsR0FBSSxFQUEvQjs7QUFDQSxNQUFNQyxLQUFLLEdBQUlELEdBQUQsSUFBVSxLQUFJQSxHQUFJLEVBQWhDOztlQUNlLENBQUNFLFdBQUQsRUFBY0MsWUFBZCxLQUErQjtBQUMxQyxRQUFNQyxNQUFNLEdBQUcsRUFBZjtBQUNBLFFBQU1DLFNBQVMsR0FBRyxzQkFBYUgsV0FBYixFQUEwQjtBQUFDSSxJQUFBQSxRQUFRLEVBQUU7QUFBWCxHQUExQixFQUErQyxVQUFTQyxHQUFULEVBQWNDLElBQWQsRUFBb0I7QUFDakYsUUFBSUQsR0FBSixFQUFTO0FBQ0wsYUFBT0EsR0FBUDtBQUNILEtBRkQsTUFFTztBQUNKLGFBQU9FLElBQUksQ0FBQ0MsS0FBTCxDQUFXRixJQUFYLENBQVA7QUFDRjtBQUNKLEdBTmlCLENBQWxCO0FBT0EsUUFBTUcsVUFBVSxHQUFHLHNCQUFhUixZQUFiLEVBQTJCO0FBQUNHLElBQUFBLFFBQVEsRUFBRTtBQUFYLEdBQTNCLEVBQWdELFVBQVNDLEdBQVQsRUFBY0MsSUFBZCxFQUFvQjtBQUNuRixRQUFJRCxHQUFKLEVBQVM7QUFDTCxhQUFPQSxHQUFQO0FBQ0gsS0FGRCxNQUVPO0FBQ0osYUFBT0UsSUFBSSxDQUFDQyxLQUFMLENBQVdGLElBQVgsQ0FBUDtBQUNGO0FBQ0osR0FOa0IsQ0FBbkI7O0FBT0EsTUFBSSxxQkFBUUgsU0FBUixFQUFtQk0sVUFBbkIsQ0FBSixFQUFvQztBQUNoQyxXQUFPTixTQUFQO0FBQ0g7O0FBQ0QsUUFBTU8sSUFBSSxHQUFHQyxNQUFNLENBQUNELElBQVAsQ0FBWVAsU0FBWixDQUFiOztBQUNBLE9BQUssTUFBTUwsR0FBWCxJQUFrQlksSUFBbEIsRUFBd0I7QUFDcEIsUUFBSSxpQkFBSUQsVUFBSixFQUFnQlgsR0FBaEIsQ0FBSixFQUEwQjtBQUN0QixVQUFJVyxVQUFVLENBQUNYLEdBQUQsQ0FBVixLQUFvQkssU0FBUyxDQUFDTCxHQUFELENBQWpDLEVBQXdDO0FBQ3BDSSxRQUFBQSxNQUFNLENBQUNKLEdBQUQsQ0FBTixHQUFjSyxTQUFTLENBQUNMLEdBQUQsQ0FBdkI7QUFDSCxPQUZELE1BRU87QUFDSEksUUFBQUEsTUFBTSxDQUFDTCxJQUFJLENBQUNDLEdBQUQsQ0FBTCxDQUFOLEdBQW9CVyxVQUFVLENBQUNYLEdBQUQsQ0FBOUI7QUFDQUksUUFBQUEsTUFBTSxDQUFDSCxLQUFLLENBQUNELEdBQUQsQ0FBTixDQUFOLEdBQXFCSyxTQUFTLENBQUNMLEdBQUQsQ0FBOUI7QUFDSDtBQUNKLEtBUEQsTUFPTztBQUNISSxNQUFBQSxNQUFNLENBQUNILEtBQUssQ0FBQ0QsR0FBRCxDQUFOLENBQU4sR0FBcUJLLFNBQVMsQ0FBQ0wsR0FBRCxDQUE5QjtBQUNIO0FBQ0o7O0FBQ0QsU0FBT0ksTUFBUDtBQUNILEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYXMsIGlzRXF1YWwgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gIGZyb20gJ2ZzJztcbmNvbnN0IHBsdXMgPSAoa2V5KSA9PiBgKyAke2tleX1gO1xuY29uc3QgbWludXMgPSAoa2V5KSA9PiBgLSAke2tleX1gO1xuZXhwb3J0IGRlZmF1bHQgKGZpcnN0Q29uZmlnLCBzZWNvbmRDb25maWcpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBmaXJzdERhdGEgPSByZWFkRmlsZVN5bmMoZmlyc3RDb25maWcsIHtlbmNvZGluZzogJ3V0Zi04J30sIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgY29uc3Qgc2Vjb25kRGF0YSA9IHJlYWRGaWxlU3luYyhzZWNvbmRDb25maWcsIHtlbmNvZGluZzogJ3V0Zi04J30sIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgaWYgKGlzRXF1YWwoZmlyc3REYXRhLCBzZWNvbmREYXRhKSkge1xuICAgICAgICByZXR1cm4gZmlyc3REYXRhO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZmlyc3REYXRhKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChoYXMoc2Vjb25kRGF0YSwga2V5KSkge1xuICAgICAgICAgICAgaWYgKHNlY29uZERhdGFba2V5XSA9PT0gZmlyc3REYXRhW2tleV0pIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGZpcnN0RGF0YVtrZXldO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcGx1cyhrZXkpXSA9IHNlY29uZERhdGFba2V5XTtcbiAgICAgICAgICAgICAgICByZXN1bHRbbWludXMoa2V5KV0gPSBmaXJzdERhdGFba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFttaW51cyhrZXkpXSA9IGZpcnN0RGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbiJdfQ==